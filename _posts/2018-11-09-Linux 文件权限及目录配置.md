# Linux 的文件权限与目录配置 #
## 一 .使用者与群组 ##
linux 中有相当多的文件，这些文件都有相当多的属性和权限，其中最重要的是**文件的拥有者**。
**使用者，群组，非本群组外的其他人**；

### 1.1文件拥有者
因为linux是一个多人多任务的系统，因此可能常常会有多人同时使用这部主机来进行工作的情况发生， 为了考虑每个人的隐私权以及每个人喜好的工作环境，因此，这个『文件拥有者』的角色就显的相当的重要了。就是每个用户都有自己的“隐私”及文件，对文件进行权限的设定，可以限定他人的访问。<br>

### 1.2 群组的概念
简单说，群组就是一群人做同一件事情，可以共享群组内的文件但是群组成员的私有文件，就自己拥有。每个账号都可有多个群组。

#### 1.3其他人
other就是其他人，任何文件都有 	User Group other 的三种的执行权限。<br>
所有的系统上的账号与一般身份使用者，还有那个root的相关信息， 都是记录在/etc/passwd这个文件内的。<br>
至于个人的密码则是记录在/etc/shadow这个文件下。<br>
Linux所有的组名都纪录在/etc/group <br>


## 二.文件权限的概念
进入终端， 键入命令：ls -al 得到以下的（命令解释： ls,就是list的简称；-al 列出所有文件详细的权限及属性）<br> 
![](https://i.imgur.com/BiJXAzW.png)

![](https://i.imgur.com/1xXooRZ.png)

- 第一个字符代表文件类型
	1. 当为[ d ]则是目录，例如上表档名为『.gconf』的那一行；
	2. 当为[ - ]则是文件，例如上表档名为『install.log』那一行；
	3. 若是[ l ]则表示为连结档(link file)；
	4. 若是[ b ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
	5. 若是[ c ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。
- 第二组字符 表示文件拥有者的权限
- 第三组字符表示 档案所属群组的权限
- 第四组字符表示表示其他人对文档的操作权限
	1. R表示可读
	2. w表示可写
	3. x表示可执行，目录的 x权限表示，用户是否可以进入该目录成为工作目录。


### 2.1文件的权限的修改
- chgrp 改变问价的所属群组<br>
	`chgrp [-R] dirname/filename `选项与参数：-R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件、目录。<br>
	eg：以root的身份登入Linux系统的，那么在你的家目录内有一个install.log的文件， 如何将该文件的群组改变一下呢？假设你已经知道在/etc/group里面已经存在一个名为users的群组， 但是testing这个群组名字就不存在/etc/group当中了<br>
	`chgrp users install.log`       chgrp 群组 文件名（目录名）
- chown ：改变文件拥有者
	chown [-R] 账号名称 文件或目录<br>
	选项与参数：<br>
	-R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都变更<br>
	eg：将install.log的拥有者改为bin这个账号<br>
	`chown bin install.log` chown 拥有者名 文件名（目录名）
- chmod ：改变文件的权限, SUID, SGID, SBIT等等的特性<br>
	1. 文件权限的修改方式一：符号类型修改文件权限<br>
	基本上就九个权限分别是(1)user (2)group (3)others三种身份
	u, g, o来代表三种身份,a 则代表 all 亦即全部的身份
	读写的权限就可以写成r, w, x <br>
	![](https://i.imgur.com/uTHPcGz.png) <br>

	eg：将 .bashre 的写入权限给所有人 `chmod  a+w  .bashrc`
	chmod u=rwx,g=rx,o=r filename 来设定文件的权限。<br>.
	
	2.文件权限修改方式2： 使用数字修改<br>
	R=4 ;W=2;X=1
	chmod a+7 .bashrc （将.bashrc 的所有权限赋给每个人）

- cp  来源文件  目标文件 (复制文件)

### 2.2文件的种类
常规文件（regular file）：文本文件，二进制文件，数据格式文件<br>
目录（directory）： [d] 第一个属性为 d <br>
连接档：link  属性[l]<br>
设备和装置文件：区块设备档，外接存储设备[b]，字符设备文件（键盘，鼠标）[c]；数据传输文件（FIFO pipe）属性为p;<br>	

## 三. 文件目录配置
###3.1 文件目录配置的依据
为了规范开发人员文件目录的配置，出现了Filesystem Hierarchy Standard (FHS)标准，希望独立的软件开发商、操作系统制作者、以及想要维护系统的用户，都能够遵循FHS的标准	。
![](https://i.imgur.com/2urSaYt.png)

### 3.2 根目录
根目录是整个系统最重要的一个目录，因为不但所有的目录都是由根目录衍生出来的， 同时根目录也与开机/还原/系统修复等动作有关。<br>由于系统开机时需要特定的开机软件、核心文件、开机所需程序、 函式库等等文件数据，若系统出现错误时，根目录也必须要包含有能够修复文件系统的程序才行。<br>

	1. /etc：配置文件
	2. /bin：重要执行档
	3. /dev：所需要的装置文件
	4. /lib：执行档所需的函式库与核心所需的模块
	5. /sbin：重要的系统执行文件

#### 3.2.1 /usr 的意义和内容
/usr为不是user的缩写，其实usr是Unix Software Resource的缩写，Unix操作系统软件资源；
所有系统默认的软件(distribution发布者提供的软件)都会放置到/usr底下，因此这个目录有点类似Windows 系统的『C:\Windows\ + C:\Program files\』这两个目录的综合体，系统刚安装完毕时，这个目录会占用最多的硬盘容量。 <br>
![](https://i.imgur.com/wZ20iUk.png)

#### 3.2.2 /var 的意义和内容
/var就是在系统运作后才会渐渐占用硬盘容量的目录。 因为/var目录主要针对常态性变动的文件，包括缓存(cache)、登录档(log file)以及某些软件运作所产生的文件， 包括程序文件(lock file, run file)，或者例如MySQL数据库的文件等等。<br>
![](https://i.imgur.com/2SyHON1.png)


###3.3 目录和路径
#### 3.3.1 绝对路劲和相对路径
绝对路径：一定是由根路径写起的路径。一定由根目录 / 写起，eg: /usr/share/doc <br>
相对路劲：不是由/ 路径写起。eg:例如由 /usr/share/doc 要到 /usr/share/man 底下时，可以写成： 『cd ../man』这就是相对路径的写法。相对路劲就是相对于目前工作目录的路径。<br>


    . 代表此层目录
    ..代表上一层目录
    - 代表前一个工作目录
    ~ 代表『目前使用者身份』所在的家目录
    ~account  代表 account 这个使用者的家目录(account是个帐号名称)

#### 3.3.2 目录的相关操作命令
- cd：变换目录<br>
- pwd：显示目前的目录<br>
- mkdir：创建一个新的目录<br>
- rmdir：删除一个空的目录<br>

#### 3.3.3 运行档路劲的变量 $PATH<br>
这个不是很了解。哈哈哈	

###3.4 文件与目录管理<br>
**文件和目录检视：ls**<br>

    ls [-aAdfFhilnrRSt] 目录名称
    ls [--color={never,auto,always}] 目录名称
    选项与参数：
    -a  ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)
    -A  ：全部的文件，连同隐藏档，但不包括 . 与 .. 这两个目录
    -d  ：仅列出目录本身，而不是列出目录内的文件数据(常用)
    -f  ：直接列出结果，而不进行排序 (ls 默认会以档名排序！)
    -F  ：根据文件、目录等资讯，给予附加数据结构，例如：
      *:代表可运行档； /:代表目录； =:代表 socket 文件； |:代表 FIFO 文件；
    -h  ：将文件容量以人类较易读的方式(例如 GB, KB 等等)列出来；
    -i  ：列出 inode 号码，inode 的意义下一章将会介绍；
    -l  ：长数据串列出，包含文件的属性与权限等等数据；(常用)
    -n  ：列出 UID 与 GID 而非使用者与群组的名称 (UID与GID会在帐号管理提到！)
    -r  ：将排序结果反向输出，例如：原本档名由小到大，反向则为由大到小；
    -R  ：连同子目录内容一起列出来，等於该目录下的所有文件都会显示出来；
    -S  ：以文件容量大小排序，而不是用档名排序；
    -t  ：依时间排序，而不是用档名。
    --color=never  ：不要依据文件特性给予颜色显示；
    --color=always ：显示颜色
    --color=auto   ：让系统自行依据配置来判断是否给予颜色
    --full-time：以完整时间模式 (包含年、月、日、时、分) 输出
    --time={atime,ctime} ：输出 access 时间或改变权限属性时间 (ctime) 
       而非内容变更时间 (modification time)
    
**文件的复制**<br>
    `cp [-adfilprsu] 来源档(source) 目标档(destination)`

**文件移动**<br>
    `mv [-fiu] source destination`

**文件目录的删除**<br>
	`rm 文件/目录名`
    选项与参数：

    -f  ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
    -i  ：互动模式，在删除前会询问使用者是否动作
    -r  ：递回删除啊！最常用在目录的删除了！

    eg：
    root@www tmp]# rmdir /tmp/etc
    rmdir: etc: Directory not empty  <== 删不掉啊！因为这不是空的目录！
    [root@www tmp]# rm -r /tmp/etc

### 3.5 文件内容查看<br>
    cat  由第一行开始显示文件内容
    tac  从最后一行开始显示，可以看出 tac 是 cat 的倒著写！
    nl   显示的时候，顺道输出行号！
    more 一页一页的显示文件内容
    less 与 more 类似，但是比 more 更好的是，他可以往前翻页！
    head 只看头几行
    tail 只看尾巴几行
    od   以二进位的方式读取文件内容！