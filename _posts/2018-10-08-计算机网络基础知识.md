# 计算机网络基础知识 #
##一.IP地址
&emsp; 计算机要实现网络通信，就必须要有一个用于快速定位的网络地址。IP地址就是计算机在网络中的唯一身份ID，与现实世界中快递的配送需要有具体的住宅地址是一个道理。<br>
&emsp;ip地址以圆点分隔号的四个十进制数字表示，每个数字从0到255，如某一台主机的ip地址为：128.20.4.1<br>

### IP地址的组成

&emsp;**IP地址=网络地址+主机地址（又称：网络号+主机号）**<br>
就像每个国家的行政区的划分，每个区有自己的区号，每个人家又有自己的门牌号。同样，我们也把网络划分成各个子网，每个子网是由很多计算机组成（当然子网也可以包含另一个子网）。可以这么理解，就是将整个网络比喻成一颗大树，每个子网，就是树的各个枝丫，大的枝丫，包含小的枝丫，我们要找到IP，只要指定网络地址，然后再子网内再找到主机地址即可。<br>
&emsp;**IP地址是一个 4 * 8bit（1字节）由 0/1 组成的数字串（IP4协议）**<br>
&emsp;**eg:**<br>
&emsp;192.168.100.168（IP地址） = 192.168.1.0 (网络地址) + 0.0.0.168（主机地址）

##二. 子网掩码
&emsp;子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。<br>
&emsp;子网掩码又叫网络掩码、地址掩码、子网络遮罩，是一个 4 * 8bit（1字节）由 0/1 组成的数字串。
&emsp;它的作用是屏蔽（遮住）IP地址的一部分以划分成网络地址和主机地址两部分，并说明该IP地址是在局域网上，还是在远程网上。<br>
&emsp;通过子网掩码，可以把网络划分成子网，即VLSM（可变长子网掩码），也可以把小的网络归并成大的网络即超网。<br>
&emsp;子网掩码不能单独存在，它必须结合IP地址一起使用。<br>

**子网掩码的规则**
&emsp;长度为4*8bit(字节)，由连续的1，以及连续的0两部分组成。
**eg**:11111111.11111111.11111111.00000000，对应十进制：255.255.255.0

假设，局域网中 计算机A 的IP地址为 192.168.1.1，子网掩码为 255.255.255.0， 如下图所示：
![](https://i.imgur.com/VezlSOa.png)

**网络地址: IP 地址中被 连续的1 遮住的部分**，即 11000000.10101000.00000001.00000000, 对应的网络地址：192.168.1.0

**主机地址: IP 地址中被 连续的0 遮住的部分**，即 00000000.00000000.00000000.00000001, 对应的网络地址：0.0.0.1

**要排除两个特殊的地址：**<br>

- 广播地址：192.168.1.255　　（主机号全为11111111）（广播）
- 网络地址：192.168.1.0 　　　（主机号全为00000000）

该子网最大的主机数：2的8次方 256 - 2

**关于地址的分类：**
A类地址来说，默认的子网掩码是255.0.0.0；对于B类地址来说默认的子网掩码是255.255.0.0；对于C类地址来说默认的子网掩码是255.255.255.0。


## 三. 子网掩码-->网络地址
步骤：

- 将IP地址以及子网掩码都换成二进制。
- 将二者进行“与”运算,得到网络地址。

 &emsp;&emsp;&emsp;&emsp; ![](https://i.imgur.com/FxIq1px.jpg)

eg：<br>
假设 IP地址为 192.168.1.168，子网掩码为 255.255.255.0， 则网络地址换算步骤如下: 

1. 将IP地址和子网掩码分别换算成二进制<br>
 &emsp;192.168.1.168 换算成二进制为 11000000.10101000.00000001.10101000<br>
 &emsp;255.255.255.0 换算成二进制为 11111111.11111111.11111111.00000000 
2. 将二者进行“与”运算<br>
![](https://i.imgur.com/nol6Qjx.png)
3. 将运算结果换成十进制：192.168.1.0<br>


##四.默认网关
什么是网关？<br>
网关实质上是一个网络通向其他网络的IP地址。连接两个不同的网络的设备，就可以称作网关设备。网关的作用就是实现两个网络之间进行通信与控制。<br>
比如有网络A和网络B，网络A的IP地址范围为“192.168.1.1~192. 168.1.254”，子网掩码为255.255.255.0；网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机（或集线器）上，TCP/IP协议也会根据子网掩码（255.255.255.0）判定两个网络中的主机处在不同的网络里。而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机,如下图所示。网络A向网络B转发数据包的过程。<br>

&emsp;&emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp;  ![](https://i.imgur.com/hWUH5Yk.jpg)

网关设备可以是：交换机，路由器，启动了路由协议的服务器，代理服务器，防火墙，网关地址就是该网关设备的IP地址。<br>
要实现连个网络的通信，就必须使用网关。<br>

**默认网关：**一台主机可以有多个网关，默认网关是指，当一台主机找不到可用的网关，就将数据包发给默认指定的网关 ，由这个网关来处理数据包，现在主机使用的网关，一般指定就是默认网关。<br>

**如何设置默认网关？**<br>
关于默认网关的配置，不能随便配置，必须正确的指定，否则一台电脑会将数据包发给不是网关的电脑，从而无法与其他电脑进行通信。<br>
默认网关的配置有两种方法：


-  手动配置<br>
手动设置适用于电脑数量比较少、TCP/IP参数基本不变的情况，比如只有几台到十几台电脑。因为这种方法需要在联入网络的每台电脑上设置“默认网关”，非常费劲，一旦因为迁移等原因导致必须修改默认网关的IP地址，就会给网管带来很大的麻烦，所以不推荐使用。 <br>

-  自动配置<br>
自动设置就是利用DHCP（Dynamic Host Configuration Protocol, 动态主机配置协议）服务器来自动给网络中的电脑分配IP地址、子网掩码和默认网关 。这样做的好处是一旦网络的默认网关发生了变化时，只要更改了DHCP服务器中默认网关的设置，那么网络中所有的电脑均获得了新的默认网关的IP地址。这种方法适用于网络规模较大、TCP/IP参数有可能变动的网络。另外一种自动获得网关的办法是通过安装代理服务器软件（如MS Proxy）的客户端程序来自动获得，其原理和方法和DHCP有相似之处。


## 五.DNS服务器
域名和IP：域名简单说就是我们日常访问的网址（www.baidu.com）它和IP一一对应的，因为IP是一串数字，不方便记忆，所以引入了域名相对于IP域名语义更加清晰，更加容易记忆。

**DNS：**域名服务器（Domain Name Server） 域名和IP的转换称作域名解析。<br>
DNS 维护着 域名(domain name)和IP地址 (IP address)的对照表表，以解析消息的域名。

DNS的查询过程：
![](https://i.imgur.com/hrjDgGB.jpg)

1.在浏览器中输入www.qq.com域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。 

2.如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。

3.如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/ip参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 

4.如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 

5.如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(qq.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找qq.com域服务器，重复上面的动作，进行查询，直至找到www.qq.com主机。 

6.如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。


## 六.IPTABLES 
IPTABLES 是与最新的 3.5 版本 Linux 内核集成的 IP 信息包过滤系统。如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器， 则该系统有利于在 Linux 系统上更好地控制 IP 信息包过滤和防火墙配置。
防火墙在做数据包过滤决定时，有一套遵循和组成的规则，这些规则存储在专用的数据包过滤表中，而这些表集成在 Linux 内核中。在数据包过滤表中，规则被分组放在我们所谓的链（chain）中。而netfilter/iptables IP 数据包过滤系统是一款功能强大的工具，可用于添加、编辑和移除规则。
虽然 netfilter/iptables IP 信息包过滤系统被称为单个实体，但它实际上由两个组件netfilter 和 iptables 组成。
netfilter 组件也称为内核空间（kernelspace），是内核的一部分，由一些信息包过滤表组成，这些表包含内核用来控制信息包过滤处理的规则集。
iptables 组件是一种工具，也称为用户空间（userspace），它使插入、修改和除去信息包过滤表中的规则变得容易。除非您正在使用 Red Hat Linux 7.1 或更高版本，否则需要下载该工具并安装使用它。


## 六. ADSL
ADSL属于DSL技术的一种，全称**Asymmetric Digital Subscriber Line（ 非对称数字用户线路）**，亦可称作非对称数字用户环路。是一种新的数据传输方式。
ADSL技术提供的**上行和下行带宽不对称**，因此称为非对称数字用户线路。
ADSL技术采用频分复用技术把普通的电话线分成了电话**、上行和下行三个相对独立的信道**，从而避免了相互之间的干扰。用户可以边打电话边上网，不用担心上网速率和通话质量下降的情况。理论上，ADSL 可在5 km 的范围内，在一对铜缆双绞线上提供最高1 Mbps的的上行速率和最高8Mbps的下行速率（也就是我们通常说的带宽），能同时提供话音和数据业务。
一般来说，ADSL 速率完全取决于线路的距离，线路越长，速率越低。
ADSL技术能够充分利用现有**PSTN（Public Switched Telephone Network ，公共交换电话网）**，只须在线路两端加装ADSL设备即可为用户提供高宽带服务，无需重新布线，从而可极大地降低服务成本。同时ADSL用户独享带宽，线路专用，不受用户增加的影响。

## 七.SAMBA
Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。**SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议**，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机/服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置“NetBIOS over TCP/IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。

