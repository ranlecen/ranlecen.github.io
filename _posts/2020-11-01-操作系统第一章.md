# 操作系统初识

## 一、操作系统概念

操作系统，是指控制和管理计算机系统的硬件和软件，合理的组织调度计算机工作和资源的分配，以提供给用户和其他软件方便的接口和环境，他是计算机体系中，最基本的系统软件；

- 作为系统资源的管理者，文件管理、内存管理、CPU管理、设备管理
- 用户与计算机硬件的接口：命令接口（联机命令接口=交互式命令接口）、脱机命令接口（批处理命令接口）、程序接口（系统调用）只能通过程序进行调用，由一组系统调用、GUI图形用户界面；
- 作为最接近硬件的软件

## 二、操作系统的特征

### 2.1 并发

并发：多个事件，在统一时间间隔内发生 （宏观上同时发生，微观上交替发生）；

并行：同一时刻发生多个事情；

### 2.2 共享

共享资源共享，指系统中的资源可给那个内存中多个并发执行的进程共同使用；

互斥共享：一个时间段内只允许一个进程访问资源；

同时贡献：允许一个时间段内多个进程同时访问资源；

### 2.3 虚拟

把物理上的尸体变成若干逻辑上的对应物；空分复用技术，时分复用技术；

### 2.4异步性

在多道程序环境下，允许肤哦个程序并发执行，但是由于资源有限，进程的执行，不是一贯到底的，而是走走停停的，以不可预知的速度进行，这个就是异步；

## 三、操作系统的发展与分类

1、手工操作阶段

2、批处理--单道批处理，引入脱机输入输出，并监督程序（操作系统雏形）负责控制作业输入输出，多道批处理，操作系统正式引入；

3、分时操作系统：计算机以实践篇为单位轮流为各个用户/作业服务；  不具有优先处理紧急任务的缺点；

4、实时操作系统，能够响应一些紧急任务；

## 四、操作系统的运行机制

什么是指令：代码->机器语言指令，让CPU干一件具体的事情

特权指令：不允许用户程序使用；（内存清零）

非特权指令：普通指令；

CPU的两种状态：用户态，核心态；

内核程序、应用程序；

![image-20201104165756292](/Users/anner/Library/Application Support/typora-user-images/image-20201104165756292.png)

### 4.1 操作系统内核

内核是指，更接近于硬件的操作系统软件；其中包括：

- 时钟管理 ，实现计时功能；
- 中断管理，
- 原语，是一种特殊的程序，是最接近硬件的部分，这种程序的运行具有原子性；

![image-20201104170317894](/Users/anner/Library/Application Support/typora-user-images/image-20201104170317894.png)

### 4.2 操作系统的体系结构

![image-20201104170409682](/Users/anner/Library/Application Support/typora-user-images/image-20201104170409682.png)

## 五、中断和异常

**只要中断发生，则就会需要操作系统介入，开展各种管理工作；**

当中断发生后，CPU会立刻进入核型态；

当中断发生后，丹铅运行的进程会暂停，并交由操作系统内核怼中断进行处理；

对于不同的中断信号，会进行不同的处理；

**用户态与核心态的切换：**

用户态-->核心态 中断；

核心态-->用户态 执行一个特权指令，将程序状态字（PSW）的标识位设置为“用户态”；



**中断分类：**

内中断：也称为异常，分为指令中断（自愿中断），强迫中断（硬件/软件中断）

外中断：外设请求中断、人为干预

## 六、系统调用

应用程序通过系统调用，请求操作系统的服务，系统中的各种共享资源都由操作系统统一掌管，因此在用户程序中，凡事与系统资源有关的操作（存储分配，I/O，文件管理），都通过系统调用的方式，先操作系统提出服务请求，由操作系统代为完成，这样可以保证系统的稳定性和安全性，防止用户进行非法操作；

![image-20201104174232995](/Users/anner/Library/Application Support/typora-user-images/image-20201104174232995.png)

![image-20201104175038946](/Users/anner/Library/Application Support/typora-user-images/image-20201104175038946.png)